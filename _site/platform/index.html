<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8" />
    <title>
       Technical platform -
      CDS + RCMP NC3 
    </title>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="/assets/css/normalize.css" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="/assets/css/syntax.css" />
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <script src="/assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-102484926-15"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-102484926-15',  { 'anonymize_ip': true });
    </script>
    -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body>
    <div class="container">
      <header role="banner">
        <div class="wrap">
          
          <h1 class="site-title">
            <a
              class="title-link"
              href="/home/"
              >Help Canadians report a cybercrime or fraud</a
            >
          </h1>
          <h2 class="float-right">
            <a href="/plate-forme-technique"
              >Français</a
            >
          </h2>
        </div>
      </header>

      <div class="wrap content">
        <aside>
  <p class="intro">Make Canadians safer online by increasing the data intel gathered by RCMP.</p>
  <a class="skip-link visuallyhidden focusable" href="#main">Skip to Main Content</a>
  <nav class="sidebar-nav">
    <ul>
      
        
          
            
          
            
          
            
          
            
          
            
          
            
              <li >
                <a href="/home/">Home</a>
                
              </li>
            
          
            
          
            
          
            
          
            
          
        
          
            
              <li >
                <a href="/background/">Background</a>
                
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
          
            
              <li >
                <a href="/discovery-research/">Discovery research</a>
                
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              <li >
                <a href="/prototyping/">Prototyping</a>
                
              </li>
            
          
            
          
            
          
        
          
            
          
            
          
            
              <li >
                <a href="/design-principles/">Design principles</a>
                
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
              <li >
                <a href="/design-workflow/">Design workflow</a>
                
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              <li class="sidebar-nav-active">
                <a href="/platform/">Technical platform</a>
                
              </li>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              <li >
                <a href="/participate-in-research/">Participate in research</a>
                
              </li>
            
          
            
          
            
          
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              <li >
                <a href="/team-news/">Team news</a>
                
              </li>
            
          
            
          
        
          
            
          
            
              <li >
                <a href="/contact/">Contact</a>
                
              </li>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
      
    </ul>
  </nav>
</aside>

        <section id="main" class="main-content" role="main">
          <h2 class="page-title">Technical platform</h2>

<h1 id="a-modern-secure-and-scalable-tech-stack">A modern, secure, and scalable tech stack</h1>

<p><img src="/assets/img/stack.png" alt="Tech stack" width="500 px" /></p>

<p>When deciding on technologies in Alpha, we tried to use open-source solutions, which are used widely, updated frequently, work on both server and client, and focus on the user, iterative development and continuous testing. This helps us ship products on time with a higher level of security and fewer bugs.</p>

<h1 id="engineering-choices">Engineering choices</h1>

<blockquote>
  <ul>
    <li><strong>JavaScript:</strong> This is the programming language that web browsers can run to build web pages. This allows us to use a single language across both the frontend and backend of the system, and it has security and efficiency backed in.</li>
    <li><strong>React:</strong> This is a JavaScript library created by Facebook. It allows developers to build high-quality robust applications, resources, and tools quickly by composing components together.</li>
    <li><strong>GraphQL API:</strong> GraphQL is a user/client-centric interface between the web app and the databases. It provides powerful data validation and allows users to get the data they want in a single request.</li>
    <li><strong>Microservices:</strong> These are a software architectural style that structure an application as a collection of separate services. Building larger services out of smaller services make these more resilient and easier to change over time since a microservice is a stand-alone service that can be (re)built in just a couple of weeks.</li>
    <li><strong>Kubernetes:</strong> This is an open-source platform for running microservices together. It provides performance and scalability from the start.</li>
    <li><strong>Cloud:</strong> Using Kubernetes as our platform means our application runs wherever Kubernetes runs. During the life of the project, this portability let us move between the RCMP’s Microsoft Azure AKS, Google’s GKE, and Amazon’s EKS.</li>
  </ul>
</blockquote>

<h1 id="benefits-of-these-choices">Benefits of these choices</h1>

<blockquote>
  <ul>
    <li><strong>Cost:</strong> Keeping the cost of change low is an important theme across the tech choices we have made. Managing switching cost allows us to move along with industry or switch providers as the market evolves.</li>
    <li><strong>Security:</strong> The GraphQL API is strictly-typed. This allows us to prevent attackers so that they are not able to use data to hack the database. Kubernetes also makes it easy to harden the service against attacks by enforcing a single entrypoint. We’ve used docker containers that only use what’s needed to operate (nothing more) and a package manager with buit-in vulnerability scanning.</li>
    <li><strong>Code maintainability:</strong> Following a microservice approach allows us to break the overall service into pieces that are highly maintainable and testable, loosely coupled, and independently deployable. A central tenet of React is the practice of writing your web application in separate blocks called <em>components</em>. This means grouping together all the code and styling to create UI elements (for example, the banner). This makes code easy to understand and testable on its own. It also makes it easy to reuse components in multiple locations.</li>
    <li><strong>System visibility:</strong> Kubernetes makes it easy to centralize logging and get a view into how well the system is running.</li>
    <li><strong>System reliability:</strong> Using React and GraphQL allows us to minimize the amount of network traffic required to use the application. The reliability guarantees from Microsoft, together with Kubernetes’ robust architecture, gives us confidence that the system will have high availability.</li>
    <li><strong>Accessibility:</strong> Building our application out of React components has allowed us to ensure and test for basic accessibility requirements from the start of the project (for example, keyboard navigation and screen reader usage) and to work towards conforming with at least WCAG 2.1AA.</li>
    <li><strong>Bilingualism:</strong> We have used a React library called <code class="highlighter-rouge">lingui</code> to help make the application bilingual from the start of the project. This allows us to test and refine the experience in French, as easily as we can that in English.</li>
    <li><strong>Performance:</strong> To achieve an app that is fast, we used Google Cloud and Azure Kubernetes. But how fast is fast? Load testing showed that the application can handle 120 reports per second (~430,000 per hour). This was 5,000 times faster than the current fraud reporting system (The Canadian Anti-Fraud Centre received 150,000 calls and 1,200 emails[1]). We performed load testing using the <a href="https://docs.k6.io">k6</a> load testing tool. This allowed us to simulate people filling out the form and see how the application behaves when users access it simutaneously. You can see the <a href="https://github.com/cds-snc/report-a-cybercrime/blob/master/frontend/utils/loadTesting.js">frontend</a> and <a href="https://github.com/cds-snc/report-a-cybercrime/blob/master/api/utils/loadTesting.js">api</a> utilities for more details.</li>
  </ul>
</blockquote>

<h1 id="devops">DevOps</h1>

<p>We use GitOps. That essentially means <a href="https://github.com/cds-snc/report-a-cybercrime">GitHub</a> is the “single source of truth” for our application. This allows us to iterate quickly, by deploying multiple times per days.</p>

<p>When a developer makes a pull request (PR) to GitHub and that PR is approved and merged, this triggers the pipeline (a .yaml file) in Azure. The pipeline runs a series of npm commands (lints the code, checks translations, compiles), builds a container of the respective repo area and pushes the container(s) to ACR (Azure Container Registry). We then have a program called Flux running in our AKS (Azure Kubernetes Service) cluster that watches the registry and pulls new images into the cluster.</p>


        </section>
      </div>
      <!-- /.wrap content -->

      <footer role="contentinfo">
        <div class="wrap">
          <p>
            This project was built by the
            <a href="https://digital.canada.ca"
              >Canadian Digital Service</a
            >.
          </p>
          <p>
            <a href="https://github.com/cds-snc/rcmp-report-a-cybercrime-alpha-documentation"
              >Contribute to this documentation.</a
            >
          </p>
          <p>
            Hosted on
            <a href="http://pages.github.com/">GitHub Pages</a>.
          </p>
        </div>
        <!--/.wrap -->
      </footer>
    </div>
    <!-- /.container -->
    
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
